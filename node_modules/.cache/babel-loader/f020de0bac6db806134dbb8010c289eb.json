{"ast":null,"code":"var _jsxFileName = \"E:\\\\Portfolio\\\\src\\\\components\\\\CmdUserInput.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport BaseCmdInput from \"./BaseCmdInput\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CmdUserInput(_ref) {\n  _s();\n\n  let {\n    onSubmit\n  } = _ref;\n  const inputRef = useRef();\n  const [showFakeCursor, setShowFakeCursor] = useState(false);\n  const [prevCmd, setPrevCmd] = useState([]);\n  const [prevCmdIndex, setPrevCmdIndex] = useState(-1);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const value = inputRef.current.value;\n    onSubmit(value);\n\n    if (value.trim()) {\n      setPrevCmd(currentValue => [value, ...currentValue]);\n    }\n\n    setPrevCmdIndex(-1);\n  };\n\n  const handleKeyDown = e => {\n    if (document.activeElement !== inputRef.current && !e.ctrlKey && e.key !== \"c\" && e.key.toLowerCase() !== \"meta\" && e.key !== \"ArrowUp\") {\n      var _inputRef$current;\n\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    } else if (e.key === \"ArrowUp\") {\n      var _inputRef$current2;\n\n      (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.blur();\n      setPrevCmdIndex(currentValue => currentValue + 1);\n    } else if (e.key === \"ArrowDown\") {\n      setPrevCmdIndex(currentValue => currentValue - 1);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      document.body.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, []);\n  useEffect(() => {\n    const input = inputRef.current;\n    let timeout = null;\n\n    if (input) {\n      var _inputRef$current3;\n\n      input.value = prevCmd[prevCmdIndex] ? prevCmd[prevCmdIndex] : \"\";\n      (_inputRef$current3 = inputRef.current) === null || _inputRef$current3 === void 0 ? void 0 : _inputRef$current3.focus();\n      timeout = setTimeout(() => inputRef.current.setSelectionRange(-1, -1), 10);\n    }\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [prevCmdIndex, prevCmd]);\n  return /*#__PURE__*/_jsxDEV(BaseCmdInput, {\n    Children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"w-full flex items-center\",\n      children: [showFakeCursor && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-1 h-5 animate-blink bg-white translate-y-2 -translate-x-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"translate-y-2 -translate-x-3 bg-inherit w-full focus:outline-none placeholder:text-gray-600 placeholder:tracking-wider\",\n        autoFocus: true,\n        onBlur: () => {\n          setShowFakeCursor(true);\n        },\n        onFocus: () => {\n          setShowFakeCursor(false);\n        },\n        ref: inputRef,\n        placeholder: \"try ls , bio , skill , contact, about...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 3\n  }, this);\n}\n\n_s(CmdUserInput, \"bB2XDR51LE0iFvKQmNycgbcdt8o=\");\n\n_c = CmdUserInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"CmdUserInput\");","map":{"version":3,"names":["React","useEffect","useRef","useState","BaseCmdInput","CmdUserInput","onSubmit","inputRef","showFakeCursor","setShowFakeCursor","prevCmd","setPrevCmd","prevCmdIndex","setPrevCmdIndex","handleSubmit","e","preventDefault","value","current","trim","currentValue","handleKeyDown","document","activeElement","ctrlKey","key","toLowerCase","focus","blur","addEventListener","body","removeEventListener","input","timeout","setTimeout","setSelectionRange","clearTimeout"],"sources":["E:/Portfolio/src/components/CmdUserInput.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport BaseCmdInput from \"./BaseCmdInput\";\r\ninterface CmdUserInputProp {\r\n\tonSubmit: (cmd: string) => void;\r\n}\r\nexport default function CmdUserInput({ onSubmit }: CmdUserInputProp) {\r\n\tconst inputRef = useRef() as React.MutableRefObject<HTMLInputElement>;\r\n\tconst [showFakeCursor, setShowFakeCursor] = useState(false);\r\n\tconst [prevCmd, setPrevCmd] = useState<string[]>([]);\r\n\tconst [prevCmdIndex, setPrevCmdIndex] = useState(-1);\r\n\r\n\tconst handleSubmit = (e: React.ChangeEvent<HTMLFormElement>) => {\r\n\t\te.preventDefault();\r\n\t\tconst value = inputRef.current.value;\r\n\t\tonSubmit(value);\r\n\t\tif (value.trim()) {\r\n\t\t\tsetPrevCmd((currentValue) => [value, ...currentValue]);\r\n\t\t}\r\n\t\tsetPrevCmdIndex(-1);\r\n\t};\r\n\tconst handleKeyDown = (e: KeyboardEvent) => {\r\n\t\tif (\r\n\t\t\tdocument.activeElement !== inputRef.current &&\r\n\t\t\t!e.ctrlKey &&\r\n\t\t\te.key !== \"c\" &&\r\n\t\t\te.key.toLowerCase() !== \"meta\" &&\r\n\t\t\te.key !== \"ArrowUp\"\r\n\t\t) {\r\n\t\t\tinputRef.current?.focus();\r\n\t\t} else if (e.key === \"ArrowUp\") {\r\n\t\t\tinputRef.current?.blur();\r\n\t\t\tsetPrevCmdIndex((currentValue) => currentValue + 1);\r\n\t\t} else if (e.key === \"ArrowDown\") {\r\n\t\t\tsetPrevCmdIndex((currentValue) => currentValue - 1);\r\n\t\t}\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener(\"keydown\", handleKeyDown);\r\n\t\treturn () => {\r\n\t\t\tdocument.body.removeEventListener(\"keydown\", handleKeyDown);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst input = inputRef.current;\r\n\t\tlet timeout: any = null;\r\n\t\tif (input) {\r\n\t\t\tinput.value = prevCmd[prevCmdIndex] ? prevCmd[prevCmdIndex] : \"\";\r\n\t\t\tinputRef.current?.focus();\r\n\t\t\ttimeout = setTimeout(\r\n\t\t\t\t() => inputRef.current.setSelectionRange(-1, -1),\r\n\t\t\t\t10\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(timeout);\r\n\t\t};\r\n\t}, [prevCmdIndex, prevCmd]);\r\n\r\n\treturn (\r\n\t\t<BaseCmdInput\r\n\t\t\tChildren={\r\n\t\t\t\t<form onSubmit={handleSubmit} className=\"w-full flex items-center\">\r\n\t\t\t\t\t{showFakeCursor && (\r\n\t\t\t\t\t\t<div className=\" w-1 h-5 animate-blink bg-white translate-y-2 -translate-x-3\"></div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"translate-y-2 -translate-x-3 bg-inherit w-full focus:outline-none placeholder:text-gray-600 placeholder:tracking-wider\"\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\tsetShowFakeCursor(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\tsetShowFakeCursor(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\tplaceholder=\"try ls , bio , skill , contact, about...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}